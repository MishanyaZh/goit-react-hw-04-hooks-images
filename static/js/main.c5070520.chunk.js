(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2p3hn",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__2pjDk"}},14:function(e,t,a){e.exports={overlay:"Modal_overlay__3cwDI",modal:"Modal_modal__1Fjzy"}},30:function(e,t,a){e.exports={app:"App_app__3QtC2"}},31:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__2qWaS"}},32:function(e,t,a){e.exports={button:"Button_button__3sx-E"}},41:function(e,t,a){},5:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__2vDj3",searchForm:"Searchbar_searchForm__3aI6b",searchFormButton:"Searchbar_searchFormButton__3yrfd",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__34-Ix",searchFormInput:"Searchbar_searchFormInput__2nBVZ"}},86:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),c=a(24),s=a.n(c),i=(a(41),a(4)),l=a.n(i),u=a(15),m=a(7),h=a(25),d=a(26),b=a(35),g=a(34),p=a(6),j=a(27),f=a.n(j),v=a(28),x=a(33).a.div(r||(r=Object(v.a)(["\n  position: relative;\n  text-align: center;\n  display: inline-block;\n\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),S=a(30),_=a.n(S),y=a(11),O=a.n(y);O.a.defaults.baseURL="https://pixabay.com/api/";var I=function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("?q=".concat(t,"&page=").concat(a,"&key=").concat("22670626-c734a5ab3fb2edefe4011dc83","&image_type=photo&orientation=horizontal&per_page=12"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n.hits.map((function(e){return{id:e.id,webImg:e.webformatURL,largeImg:e.largeImageURL}})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=a(5),w=a.n(k),F=a(1),C=function(e){var t=e.onSubmit;return Object(F.jsx)("header",{className:w.a.searchbar,children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=e.target.elements.imgValue.value;t(a),e.target.elements.imgValue.value=""},className:w.a.searchForm,children:[Object(F.jsx)("button",{type:"submit",className:w.a.searchFormButton,children:Object(F.jsx)("span",{className:w.a.searchFormButtonLabel,children:"Search"})}),Object(F.jsx)("input",{name:"imgValue",className:w.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},G=a(12),N=a(13),L=a.n(N),M=function(e){var t=e.id,a=e.webImg,r=e.largeImg,n=e.handleSelectImage;return Object(F.jsx)("li",{onClick:function(){n(r)},className:L.a.imageGalleryItem,children:Object(F.jsx)("img",{src:a,alt:t,className:L.a.imageGalleryItemImage})})},B=a(31),q=a.n(B),V=function(e){var t=e.images,a=e.handleSelectImage;return Object(F.jsx)("ul",{className:q.a.imageGallery,children:t.map((function(e){return Object(n.createElement)(M,Object(G.a)(Object(G.a)({handleSelectImage:a},e),{},{key:e.id}))}))})},E=a(32),D=a.n(E),T=function(e){var t=e.onClickLoadMore;return Object(F.jsx)("button",{onClick:function(e){e.preventDefault(),t()},className:D.a.button,type:"button",children:"Load more"})},U=a(14),R=a.n(U),z=function(e){var t=e.image,a=e.onCloseModal;Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&a()};return Object(F.jsx)("div",{onClick:a,className:R.a.overlay,children:Object(F.jsx)("div",{className:R.a.modal,children:Object(F.jsx)("img",{src:t,alt:t})})})},A=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={imgValue:null,images:[],reqStatus:"idle",page:1,loader:!1,selectImage:null},e.onCloseModal=function(){e.setState({selectImage:null})},e.handleSelectImage=function(t){e.setState({selectImage:t})},e.handleFormSubmit=function(t){e.setState({imgValue:t,page:1,loader:!0})},e.loadMoreClick=function(t){e.setState({page:e.state.page+1})},e.scrollTo=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r,n,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state,n=r.imgValue,o=r.page,a.imgValue===n&&a.page===o){e.next=29;break}if(this.setState({loader:!0}),""!==n.trim()){e.next=7;break}return this.setState({reqStatus:"pending"}),p.b.error("Pleas write something"),e.abrupt("return");case 7:return e.prev=7,e.next=10,I(n,o);case 10:if(c=e.sent,this.setState({reqStatus:"idle"}),c.length){e.next=16;break}return this.setState({reqStatus:"rejected",images:[],page:1}),p.b.error("your images not find."),e.abrupt("return");case 16:a.imgValue!==n&&this.setState({images:[],page:1}),this.setState((function(e){return{images:[].concat(Object(u.a)(e.images),Object(u.a)(c)),reqStatus:"resolved"}})),this.scrollTo(),Object(p.b)("its your, ".concat(n,"s!"),{icon:"\ud83d\udc4f"}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),this.setState({reqStatus:"rejected"}),p.b.error("This didn't work.");case 26:return e.prev=26,this.setState({loader:!1}),e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[7,22,26,29]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.images,a=e.reqStatus,r=e.loader,n=e.selectImage;return Object(F.jsxs)("div",{className:_.a.app,children:[Object(F.jsx)(C,{onSubmit:this.handleFormSubmit}),Object(F.jsx)(V,{images:t,handleSelectImage:this.handleSelectImage}),n&&Object(F.jsx)(z,{image:n,onCloseModal:this.onCloseModal}),Object(F.jsxs)(x,{children:["resolved"===a&&!r&&Object(F.jsx)(T,{onClickLoadMore:this.loadMoreClick}),!1!==r&&Object(F.jsx)(f.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})]}),Object(F.jsx)(p.a,{position:"top-right",reverseOrder:!1})]})}}]),a}(n.Component),J=A;s.a.render(Object(F.jsx)(o.a.StrictMode,{children:Object(F.jsx)(J,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.c5070520.chunk.js.map